{"version":3,"sources":["pages/CitiesPage.module.css","components/Table.module.css","components/Table.tsx","pages/CitiesPage.tsx","pages/ErrorPage.tsx","models/city.ts","pages/IndexPage.tsx","App.tsx","index.tsx"],"names":["module","exports","screenSize","Math","max","window","screen","width","height","Table","className","headerHeight","rowHeight","header","rows","getRowKey","renderRow","useState","scrollTop","setScrollTop","firstVisibleRow","min","length","floor","rowsToRender","ceil","tableHeight","rowNodes","i","row","push","color","String","styles","style","top","table","onScroll","e","target","inputProps","variant","size","input","collator","Intl","Collator","comparators","name","a","b","compare","distance","population","populationFormatter","NumberFormat","getDistance","lat1","lng1","lat2","lng2","lat1Rad","PI","lat2Rad","deltaLat","deltaLng","sin","cos","atan2","sqrt","CitiesPage","citiesProp","cities","provinces","cityNameFilter","setCityNameFilter","provinceFilter","setProvinceFilter","distanceFilter","setDistanceFilter","location","setLocation","useMemo","map","city","latLng","column","direction","sortMode","setSortMode","provincesById","forEach","province","id","useEffect","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","undefined","enableHighAccuracy","timeout","maximumAge","columns","title","comparator","renderCell","TextField","value","onChange","event","toLowerCase","InputProps","startAdornment","InputAdornment","Search","provinceId","select","Number","MenuItem","align","format","toFixed","rowsWithProvinceFilter","filter","rowsWithCityNameFilter","includes","rowsWithDistanceFilter","comparatorName","sorderRows","sort","Container","container","Paper","paper","Typography","tableContainer","TableHead","component","tableHead","TableCell","tableHeadCell","TableSortLabel","active","onClick","justifyContent","tableCell","ErrorPage","error","Box","py","message","fetchCities","fetch","process","then","response","ok","Error","statusText","json","denormalizedCities","nextProvinceId","provincesByName","lat","lng","admin_name","IndexPage","setCities","setProvinces","setError","catch","App","StylesProvider","injectFirst","ReactDOM","render","document","getElementById"],"mappings":"kGACAA,EAAOC,QAAU,CAAC,UAAY,8BAA8B,MAAQ,0BAA0B,eAAiB,mCAAmC,MAAQ,0BAA0B,UAAY,8BAA8B,cAAgB,kCAAkC,UAAY,8BAA8B,OAAS,2BAA2B,MAAQ,4B,mBCAtWD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,OAAS,sBAAsB,IAAM,qB,yOCE9EC,EAAaC,KAAKC,IAAIC,OAAOC,OAAOC,MAAOF,OAAOC,OAAOE,QAElDC,EAAQ,YA6BnB,IAbK,IAfLC,EAeI,EAfJA,UACAC,EAcI,EAdJA,aACAC,EAaI,EAbJA,UACAC,EAYI,EAZJA,OACAC,EAWI,EAXJA,KACAC,EAUI,EAVJA,UACAC,EASI,EATJA,UASI,EAC8BC,mBAAS,GADvC,mBACGC,EADH,KACcC,EADd,KAGEC,EAAkBjB,KAAKkB,IAC3BP,EAAKQ,OACLnB,KAAKC,IAAI,EAAGD,KAAKoB,MAAML,EAAYN,KAG/BY,EAAerB,KAAKsB,KAAKvB,EAAaU,GACtCc,EAAcf,EAAeC,EAAYE,EAAKQ,OAAS,GAEvDK,EAAwB,GAGxBC,EAAIR,EACRQ,EAAIzB,KAAKkB,IAAID,EAAkBI,EAAcV,EAAKQ,QAClDM,IACA,CACA,IAAMC,EAAMf,EAAKc,GAEjBD,EAASG,KACP,qBACEC,MAAOC,OAAOJ,GAEdlB,UAAWuB,IAAOJ,IAClBK,MAAO,CAAEC,IAAKvB,EAAYgB,EAAIjB,EAAcH,OAAQI,GAJtD,SAMGI,EAAUa,IAJNd,EAAUc,KASrB,OACE,qBACEnB,UAAS,UAAKuB,IAAOG,MAAZ,YAAqB1B,GAAa,IAC3C2B,SAAU,SAACC,GAAD,OAAOnB,EAAcmB,EAAEC,OAA0BrB,YAF7D,SAIE,sBAAKgB,MAAO,CAAE1B,OAAQkB,GAAtB,UACE,qBAAKhB,UAAWuB,IAAOpB,OAAvB,SAAgCA,IAC/Bc,Q,iBC7BHa,EAA6B,CACjCC,QAAS,WACTC,KAAM,QACNhC,UAAWuB,IAAOU,OAGdC,EAAW,IAAIC,KAAKC,SAAS,MAE7BC,EAAwE,CAC5EC,KAAM,SAACC,EAAGC,GAAJ,OAAUN,EAASO,QAAQF,EAAED,KAAME,EAAEF,OAC3CI,SAAU,SAACH,EAAGC,GAAJ,OAAUD,EAAEG,SAAWF,EAAEE,UACnCC,WAAY,SAACJ,EAAGC,GAAJ,OAAWD,EAAEI,YAAc,IAAMH,EAAEG,YAAc,KAGzDC,EAAsB,IAAIT,KAAKU,aAAa,MAG5CC,EAAc,SAAC,EAAD,GAGN,IAAD,mBAFVC,EAEU,KAFJC,EAEI,wBADVC,EACU,KADJC,EACI,KACLC,EAAWJ,EAAOtD,KAAK2D,GAAM,IAC7BC,EAAWJ,EAAOxD,KAAK2D,GAAM,IAE7BE,GAAaL,EAAOF,GAAQtD,KAAK2D,GAAM,IACvCG,GAAaL,EAAOF,GAAQvD,KAAK2D,GAAM,IAEvCb,EACJ9C,KAAK+D,IAAIF,EAAW,GAAK7D,KAAK+D,IAAIF,EAAW,GAC7C7D,KAAKgE,IAAIN,GACP1D,KAAKgE,IAAIJ,GACT5D,KAAK+D,IAAID,EAAW,GACpB9D,KAAK+D,IAAID,EAAW,GAIxB,OAAW,MAFD,EAAI9D,KAAKiE,MAAMjE,KAAKkE,KAAKpB,GAAI9C,KAAKkE,KAAK,EAAIpB,MAK1CqB,EAA4D,SAAC,GAGnE,IAFGC,EAEJ,EAFJC,OACAC,EACI,EADJA,UACI,EACwCxD,mBAAS,IADjD,mBACGyD,EADH,KACmBC,EADnB,OAEwC1D,mBAAS,GAFjD,mBAEG2D,EAFH,KAEmBC,EAFnB,OAGwC5D,mBAAS,GAHjD,mBAGG6D,EAHH,KAGmBC,EAHnB,OAK4B9D,mBAAkC,MAL9D,mBAKG+D,EALH,KAKaC,EALb,KAOET,EAASU,mBACb,kBACEF,EACIT,EAAWY,KAAI,SAACC,GAAD,mBAAC,eACXA,GADU,IAEbhC,SAAUI,EAAYwB,EAAUI,EAAKC,aAEvCd,IACN,CAACA,EAAYS,IAfX,EAkB4B/D,mBAG7B,CAAEqE,OAAQ,EAAGC,UAAW,QArBvB,mBAkBGC,EAlBH,KAkBaC,EAlBb,KAuBEC,EAA0CR,mBAAQ,WACtD,IAAMQ,EAA0C,GAMhD,OAJAjB,EAAUkB,SAAQ,SAACC,GACjBF,EAAcE,EAASC,IAAMD,KAGxBF,IACN,CAACjB,IAEJqB,qBAAU,WACRC,UAAUC,YAAYC,oBACpB,SAACC,GAAD,OACEjB,EAAY,CAACiB,EAASC,OAAOC,SAAUF,EAASC,OAAOE,mBACzDC,EACA,CACEC,oBAAoB,EACpBC,QAAS,KACTC,WAAY,MAGf,IAEH,IAAMC,EAAoB,CACxB,CACEC,MAAO,OACPpG,MAAO,MACPqG,WAAY,OACZC,WAAY,SAACzB,GAAD,OAAUA,EAAKpC,MAC3BL,MACE,cAACmE,EAAA,EAAD,2BACMtE,GADN,IAEEuE,MAAOrC,EACPsC,SAAU,SAACC,GAAD,OACRtC,EAAkBsC,EAAM1E,OAAOwE,MAAMG,gBAEvCC,WAAY,CACVC,eACE,cAACC,EAAA,EAAD,CAAgBnB,SAAS,QAAQnE,MAAO,MAAxC,SACE,cAACuF,EAAA,EAAD,WAOZ,CACEX,MAAO,WACPpG,MAAO,MACPsG,WAAY,SAACzB,GAAD,OACVA,EAAKmC,WAAa7B,EAAcN,EAAKmC,YAAYvE,KAAO,MAC1DL,MACE,eAACmE,EAAA,EAAD,2BACMtE,GADN,IAEEuE,MAAOnC,EACP4C,QAAM,EACNR,SAAU,SAACC,GAAD,OAAWpC,EAAkB4C,OAAOR,EAAM1E,OAAOwE,SAJ7D,UAME,cAACW,EAAA,EAAD,CAAUX,MAAO,EAAjB,iBACCtC,EAAUU,KAAI,SAACS,GAAD,OACb,cAAC8B,EAAA,EAAD,CAA4BX,MAAOnB,EAASC,GAA5C,SACGD,EAAS5C,MADG4C,EAASC,YAOhC,CACEc,MAAO,aACPpG,MAAO,MACPoH,MAAO,QACPf,WAAY,aACZC,WAAY,SAACzB,GAAD,OACU,OAApBA,EAAK/B,WACD,KACAC,EAAoBsE,OAAOxC,EAAK/B,cAExC,CACEsD,MAAO3B,EAAW,WAAa,cAC/BzE,MAAO,MACPoH,MAAO,QACPf,WAAY5B,EAAW,gBAAasB,EACpCO,WAAY,SAACzB,GAAD,OACVJ,EAAQ,UACD7E,KAAKoB,MAAM6D,EAAKhC,UADf,iBAEDgC,EAAKC,OAAO,GAAGwC,QAAQ,GAFtB,aAE6BzC,EAAKC,OAAO,GAAGwC,QAAQ,KAC9DlF,MAAOqC,EACL,eAAC8B,EAAA,EAAD,2BACMtE,GADN,IAEEuE,MAAOjC,EACP0C,QAAM,EACNR,SAAU,SAACC,GAAD,OAAWlC,EAAkB0C,OAAOR,EAAM1E,OAAOwE,SAJ7D,UAME,cAACW,EAAA,EAAD,CAAUX,MAAO,EAAjB,iBACC,CAAC,GAAI,IAAK,IAAK,IAAK,KAAM5B,KAAI,SAAC/B,GAAD,OAC7B,eAACsE,EAAA,EAAD,CAAyBX,MAAO3D,EAAhC,UACGA,EADH,QAAeA,UAKjB,OAIF0E,EAAyB5C,mBAC7B,kBACEN,EACIJ,EAAOuD,QAAO,SAAC3C,GAAD,OAAUA,EAAKmC,aAAe3C,KAC5CJ,IACN,CAACA,EAAQI,IAGLoD,EAAyB9C,mBAC7B,kBACER,EACIoD,EAAuBC,QAAO,SAAC3C,GAAD,OAC5BA,EAAKpC,KAAKkE,cAAce,SAASvD,MAEnCoD,IACN,CAACA,EAAwBpD,IAGrBwD,EAAyBhD,mBAC7B,kBACEJ,EACIkD,EAAuBD,QACrB,SAAC3C,GAAD,OAAUA,EAAKhC,UAAY0B,KAE7BkD,IACN,CAACA,EAAwBlD,IAGrBqD,EAAiBzB,EAAQlB,EAASF,QAAQsB,WAE1CwB,EAAalD,mBAAQ,WACzB,IAAKiD,EAAgB,OAAOD,EAE5B,IAAMpH,EAAI,YAAOoH,GACX3C,EAAmC,QAAvBC,EAASD,UAAsB,GAAK,EAItD,OAFAzE,EAAKuH,MAAK,SAACpF,EAAGC,GAAJ,OAAUH,EAAYoF,GAAgBlF,EAAGC,GAAKqC,KAEjDzE,IACN,CAACoH,EAAwBC,EAAgB3C,IAE5C,OACE,cAAC8C,EAAA,EAAD,CAAW5H,UAAWuB,IAAOsG,UAA7B,SACE,eAACC,EAAA,EAAD,CAAO9H,UAAWuB,IAAOwG,MAAzB,UACE,qBAAK/H,UAAWuB,IAAOpB,OAAvB,SACE,cAAC6H,EAAA,EAAD,CAAYjG,QAAQ,KAApB,2DAEF,qBAAK/B,UAAWuB,IAAO0G,eAAvB,SACE,cAAC,EAAD,CACEjI,UAAWuB,IAAOG,MAClBzB,aAAc,IACdC,UAAW,GACXC,OACE,cAAC+H,EAAA,EAAD,CAAWC,UAAU,MAAMnI,UAAWuB,IAAO6G,UAA7C,SACGpC,EAAQvB,KACP,WAA6CvD,GAA7C,IAAG+E,EAAH,EAAGA,MAAOhE,EAAV,EAAUA,MAAOgF,EAAjB,EAAiBA,MAAOpH,EAAxB,EAAwBA,MAAOqG,EAA/B,EAA+BA,WAA/B,OACE,eAACmC,EAAA,EAAD,CAEEF,UAAU,MACVnI,UAAWuB,IAAO+G,cAClBrB,MAAOA,EACPzF,MAAO,CAAE3B,SALX,UAOGqG,EACC,cAACqC,EAAA,EAAD,CACEC,OAAQ1D,EAASF,SAAW1D,EAC5B2D,UACEC,EAASF,SAAW1D,EAAI4D,EAASD,UAAY,MAE/C4D,QAAS,WACP1D,EAAY,CACVH,OAAQ1D,EACR2D,UACEC,EAASF,SAAW1D,GACG,QAAvB4D,EAASD,UACL,OACA,SAZZ,SAgBGoB,IAGHA,EAGDhE,IA7BIgE,QAmCf7F,KAAMsH,EACNrH,UAAW,SAACqE,GAAD,OAAUA,EAAKS,IAC1B7E,UAAW,SAACoE,GAAD,OACT,mCACGsB,EAAQvB,KAAI,gBAAGwB,EAAH,EAAGA,MAAOE,EAAV,EAAUA,WAAYc,EAAtB,EAAsBA,MAAOpH,EAA7B,EAA6BA,MAA7B,OACX,qBAEE2B,MAAO,CACL3B,QACA6I,eACY,UAAVzB,EAAoB,gBAAarB,GAErC5F,UAAWuB,IAAOoH,UAPpB,SASGxC,EAAWzB,IARPuB,mB,SCvSZ2C,EAAkC,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAH,OAC7C,cAACjB,EAAA,EAAD,UACE,cAACkB,EAAA,EAAD,CAAKC,GAAI,EAAT,SACE,eAACf,EAAA,EAAD,qBAAoBa,EAAMG,gBCgB1B9G,EAAW,IAAIC,KAAKC,SAAS,MAwCtB6G,EAAcC,MAAM,GAAD,OAAIC,cAAJ,eAC7BC,MAAK,SAACC,GACL,IAAKA,EAASC,GAAI,MAAM,IAAIC,MAAMF,EAASG,YAE3C,OAAOH,EAASI,UAEjBL,MA5CqB,SACtBM,GAEA,IAAIC,EAAiB,EAEf7F,EAAiB,GACjBC,EAAwB,GACxB6F,EAAsD,GA4B5D,OA1BAF,EAAmBzE,SACjB,WAA6C/D,GAAO,IAAjDwD,EAAgD,EAAhDA,KAAMmF,EAA0C,EAA1CA,IAAKC,EAAqC,EAArCA,IAAKC,EAAgC,EAAhCA,WAAYpH,EAAoB,EAApBA,WACzBoH,IAAeH,EAAgBG,KACjCH,EAAgBG,GAAcJ,EAE9B5F,EAAU3C,KAAK,CACb+D,GAAIwE,EACJrH,KAAMyH,IAGRJ,GAAkB,GAGpB7F,EAAO1C,KAAK,CACV+D,GAAIjE,EAAI,EACRoB,KAAMoC,EACNmC,WAAYkD,GAAaH,EAAgBG,IAAsB,KAC/DpH,WAAYA,EAAaoE,OAAOpE,GAAc,KAC9CgC,OAAQ,CAACoC,OAAO8C,GAAM9C,OAAO+C,IAC7BpH,UAAW,OAKjBqB,EAAU4D,MAAK,SAACpF,EAAGC,GAAJ,OAAUN,EAASO,QAAQF,EAAED,KAAME,EAAEF,SAE7C,CAAEwB,SAAQC,gBCtDNiG,EAAgB,WAAO,IAAD,EACLzJ,mBAAwB,MADnB,mBAC1BuD,EAD0B,KAClBmG,EADkB,OAEC1J,mBAA4B,MAF7B,mBAE1BwD,EAF0B,KAEfmG,EAFe,OAGP3J,mBAAuB,MAHhB,mBAG1BsI,EAH0B,KAGnBsB,EAHmB,KAcjC,OATA/E,qBAAU,WACR6D,EACGG,MAAK,YAA4B,IAAzBtF,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,UACfkG,EAAUnG,GACVoG,EAAanG,MAEdqG,MAAMD,KACR,IAECtB,EAAc,cAAC,EAAD,CAAWA,MAAOA,IAEhC/E,GAAUC,EACL,cAAC,EAAD,CAAYD,OAAQA,EAAQC,UAAWA,IAEzC,MCpBIsG,EAAU,kBACrB,cAACC,EAAA,EAAD,CAAgBC,aAAW,EAA3B,SACE,cAAC,EAAD,O,MCDJC,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.f12302e6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"CitiesPage_container__1_j_j\",\"paper\":\"CitiesPage_paper__GloCE\",\"tableContainer\":\"CitiesPage_tableContainer__BQUe_\",\"table\":\"CitiesPage_table__HYwZN\",\"tableHead\":\"CitiesPage_tableHead__2IEXS\",\"tableHeadCell\":\"CitiesPage_tableHeadCell__29HyA\",\"tableCell\":\"CitiesPage_tableCell__mR7D9\",\"header\":\"CitiesPage_header__3yerV\",\"input\":\"CitiesPage_input__1u7xX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"Table_table__3M_gK\",\"header\":\"Table_header__3Dohy\",\"row\":\"Table_row__2v_3H\"};","import { ReactNode, useState } from 'react';\nimport styles from './Table.module.css';\n\nconst screenSize = Math.max(window.screen.width, window.screen.height);\n\nexport const Table = <Row,>({\n  className,\n  headerHeight,\n  rowHeight,\n  header,\n  rows,\n  getRowKey,\n  renderRow,\n}: {\n  className?: string;\n  headerHeight: number;\n  rowHeight: number;\n  header: ReactNode;\n  rows: Row[];\n  getRowKey: (row: Row) => string | number;\n  renderRow: (row: Row) => ReactNode;\n}) => {\n  const [scrollTop, setScrollTop] = useState(0);\n\n  const firstVisibleRow = Math.min(\n    rows.length,\n    Math.max(0, Math.floor(scrollTop / rowHeight)),\n  );\n\n  const rowsToRender = Math.ceil(screenSize / rowHeight);\n  const tableHeight = headerHeight + rowHeight * rows.length + 16;\n\n  const rowNodes: ReactNode[] = [];\n\n  for (\n    let i = firstVisibleRow;\n    i < Math.min(firstVisibleRow + rowsToRender, rows.length);\n    i++\n  ) {\n    const row = rows[i];\n\n    rowNodes.push(\n      <div\n        color={String(i)}\n        key={getRowKey(row)}\n        className={styles.row}\n        style={{ top: rowHeight * i + headerHeight, height: rowHeight }}\n      >\n        {renderRow(row)}\n      </div>,\n    );\n  }\n\n  return (\n    <div\n      className={`${styles.table} ${className || ''}`}\n      onScroll={(e) => setScrollTop((e.target as HTMLDivElement).scrollTop)}\n    >\n      <div style={{ height: tableHeight }}>\n        <div className={styles.header}>{header}</div>\n        {rowNodes}\n      </div>\n    </div>\n  );\n};\n","import {\n  Container,\n  InputAdornment,\n  MenuItem,\n  Paper,\n  TableCell,\n  TableHead,\n  TableSortLabel,\n  TextField,\n  TextFieldProps,\n  Typography,\n} from '@material-ui/core';\nimport { Search } from '@material-ui/icons';\nimport { Table } from 'components';\nimport { City, Province } from 'models';\nimport { FC, ReactNode, useEffect, useMemo, useState } from 'react';\nimport styles from './CitiesPage.module.css';\n\ntype SortComparatorName = 'name' | 'distance' | 'population';\n\ntype SortDirection = 'asc' | 'desc';\n\ninterface Column {\n  title: string;\n  renderCell: (city: City) => ReactNode;\n  align?: 'left' | 'right';\n  width: string;\n  comparator?: SortComparatorName;\n  input?: ReactNode;\n}\n\nconst inputProps: TextFieldProps = {\n  variant: 'outlined',\n  size: 'small',\n  className: styles.input,\n};\n\nconst collator = new Intl.Collator('en');\n\nconst comparators: Record<SortComparatorName, (a: City, b: City) => number> = {\n  name: (a, b) => collator.compare(a.name, b.name),\n  distance: (a, b) => a.distance - b.distance,\n  population: (a, b) => (a.population || 0) - (b.population || 0),\n};\n\nconst populationFormatter = new Intl.NumberFormat('en');\n\n// Source: https://www.movable-type.co.uk/scripts/latlong.html\nconst getDistance = (\n  [lat1, lng1]: [number, number],\n  [lat2, lng2]: [number, number],\n): number => {\n  const lat1Rad = (lat1 * Math.PI) / 180;\n  const lat2Rad = (lat2 * Math.PI) / 180;\n\n  const deltaLat = ((lat2 - lat1) * Math.PI) / 180;\n  const deltaLng = ((lng2 - lng1) * Math.PI) / 180;\n\n  const a =\n    Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) +\n    Math.cos(lat1Rad) *\n      Math.cos(lat2Rad) *\n      Math.sin(deltaLng / 2) *\n      Math.sin(deltaLng / 2);\n\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n  return c * 6371;\n};\n\nexport const CitiesPage: FC<{ cities: City[]; provinces: Province[] }> = ({\n  cities: citiesProp,\n  provinces,\n}) => {\n  const [cityNameFilter, setCityNameFilter] = useState('');\n  const [provinceFilter, setProvinceFilter] = useState(0);\n  const [distanceFilter, setDistanceFilter] = useState(0);\n\n  const [location, setLocation] = useState<[number, number] | null>(null);\n\n  const cities = useMemo(\n    () =>\n      location\n        ? citiesProp.map((city) => ({\n            ...city,\n            distance: getDistance(location, city.latLng),\n          }))\n        : citiesProp,\n    [citiesProp, location],\n  );\n\n  const [sortMode, setSortMode] = useState<{\n    column: number;\n    direction: SortDirection;\n  }>({ column: 0, direction: 'asc' });\n\n  const provincesById: Record<number, Province> = useMemo(() => {\n    const provincesById: Record<number, Province> = {};\n\n    provinces.forEach((province) => {\n      provincesById[province.id] = province;\n    });\n\n    return provincesById;\n  }, [provinces]);\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(\n      (position) =>\n        setLocation([position.coords.latitude, position.coords.longitude]),\n      undefined,\n      {\n        enableHighAccuracy: true,\n        timeout: 15000,\n        maximumAge: 0,\n      },\n    );\n  }, []);\n\n  const columns: Column[] = [\n    {\n      title: 'Name',\n      width: '30%',\n      comparator: 'name',\n      renderCell: (city) => city.name,\n      input: (\n        <TextField\n          {...inputProps}\n          value={cityNameFilter}\n          onChange={(event) =>\n            setCityNameFilter(event.target.value.toLowerCase())\n          }\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\" color={'red'}>\n                <Search />\n              </InputAdornment>\n            ),\n          }}\n        />\n      ),\n    },\n    {\n      title: 'Province',\n      width: '30%',\n      renderCell: (city) =>\n        city.provinceId ? provincesById[city.provinceId].name : null,\n      input: (\n        <TextField\n          {...inputProps}\n          value={provinceFilter}\n          select\n          onChange={(event) => setProvinceFilter(Number(event.target.value))}\n        >\n          <MenuItem value={0}>All</MenuItem>\n          {provinces.map((province) => (\n            <MenuItem key={province.id} value={province.id}>\n              {province.name}\n            </MenuItem>\n          ))}\n        </TextField>\n      ),\n    },\n    {\n      title: 'Population',\n      width: '20%',\n      align: 'right',\n      comparator: 'population',\n      renderCell: (city) =>\n        city.population === null\n          ? null\n          : populationFormatter.format(city.population),\n    },\n    {\n      title: location ? 'Distance' : 'Coordinates',\n      width: '20%',\n      align: 'right',\n      comparator: location ? 'distance' : undefined,\n      renderCell: (city) =>\n        location\n          ? `${Math.floor(city.distance)} km`\n          : `${city.latLng[0].toFixed(3)}, ${city.latLng[1].toFixed(3)}`,\n      input: location ? (\n        <TextField\n          {...inputProps}\n          value={distanceFilter}\n          select\n          onChange={(event) => setDistanceFilter(Number(event.target.value))}\n        >\n          <MenuItem value={0}>Any</MenuItem>\n          {[30, 100, 250, 500, 1000].map((distance) => (\n            <MenuItem key={distance} value={distance}>\n              {distance} km\n            </MenuItem>\n          ))}\n        </TextField>\n      ) : null,\n    },\n  ];\n\n  const rowsWithProvinceFilter = useMemo(\n    () =>\n      provinceFilter\n        ? cities.filter((city) => city.provinceId === provinceFilter)\n        : cities,\n    [cities, provinceFilter],\n  );\n\n  const rowsWithCityNameFilter = useMemo(\n    () =>\n      cityNameFilter\n        ? rowsWithProvinceFilter.filter((city) =>\n            city.name.toLowerCase().includes(cityNameFilter),\n          )\n        : rowsWithProvinceFilter,\n    [rowsWithProvinceFilter, cityNameFilter],\n  );\n\n  const rowsWithDistanceFilter = useMemo(\n    () =>\n      distanceFilter\n        ? rowsWithCityNameFilter.filter(\n            (city) => city.distance <= distanceFilter,\n          )\n        : rowsWithCityNameFilter,\n    [rowsWithCityNameFilter, distanceFilter],\n  );\n\n  const comparatorName = columns[sortMode.column].comparator;\n\n  const sorderRows = useMemo(() => {\n    if (!comparatorName) return rowsWithDistanceFilter;\n\n    const rows = [...rowsWithDistanceFilter];\n    const direction = sortMode.direction === 'asc' ? 1 : -1;\n\n    rows.sort((a, b) => comparators[comparatorName](a, b) * direction);\n\n    return rows;\n  }, [rowsWithDistanceFilter, comparatorName, sortMode]);\n\n  return (\n    <Container className={styles.container}>\n      <Paper className={styles.paper}>\n        <div className={styles.header}>\n          <Typography variant=\"h5\">🇳🇱 Netherlands Cities</Typography>\n        </div>\n        <div className={styles.tableContainer}>\n          <Table\n            className={styles.table}\n            headerHeight={105}\n            rowHeight={50}\n            header={\n              <TableHead component=\"div\" className={styles.tableHead}>\n                {columns.map(\n                  ({ title, input, align, width, comparator }, i) => (\n                    <TableCell\n                      key={title}\n                      component=\"div\"\n                      className={styles.tableHeadCell}\n                      align={align}\n                      style={{ width }}\n                    >\n                      {comparator ? (\n                        <TableSortLabel\n                          active={sortMode.column === i}\n                          direction={\n                            sortMode.column === i ? sortMode.direction : 'asc'\n                          }\n                          onClick={() => {\n                            setSortMode({\n                              column: i,\n                              direction:\n                                sortMode.column === i &&\n                                sortMode.direction === 'asc'\n                                  ? 'desc'\n                                  : 'asc',\n                            });\n                          }}\n                        >\n                          {title}\n                        </TableSortLabel>\n                      ) : (\n                        title\n                      )}\n\n                      {input}\n                    </TableCell>\n                  ),\n                )}\n              </TableHead>\n            }\n            rows={sorderRows}\n            getRowKey={(city) => city.id}\n            renderRow={(city) => (\n              <>\n                {columns.map(({ title, renderCell, align, width }) => (\n                  <div\n                    key={title}\n                    style={{\n                      width,\n                      justifyContent:\n                        align === 'right' ? 'flex-end' : undefined,\n                    }}\n                    className={styles.tableCell}\n                  >\n                    {renderCell(city)}\n                  </div>\n                ))}\n              </>\n            )}\n          />\n        </div>\n      </Paper>\n    </Container>\n  );\n};\n","import { Box, Container, Typography } from '@material-ui/core';\nimport { FC } from 'react';\n\nexport const ErrorPage: FC<{ error: Error }> = ({ error }) => (\n  <Container>\n    <Box py={2}>\n      <Typography>Error: {error.message}</Typography>\n    </Box>\n  </Container>\n);\n","interface DenormalizedCity {\n  city: string;\n  lat: string;\n  lng: string;\n  admin_name: string;\n  population: string;\n}\n\nexport interface Province {\n  id: number;\n  name: string;\n}\n\nexport interface City {\n  id: number;\n  name: string;\n  provinceId: number | null;\n  population: number | null;\n  latLng: [number, number];\n  distance: number;\n}\n\nconst collator = new Intl.Collator('en');\n\nconst normalizeCities = (\n  denormalizedCities: DenormalizedCity[],\n): { cities: City[]; provinces: Province[] } => {\n  let nextProvinceId = 1;\n\n  const cities: City[] = [];\n  const provinces: Province[] = [];\n  const provincesByName: Record<string, number | undefined> = {};\n\n  denormalizedCities.forEach(\n    ({ city, lat, lng, admin_name, population }, i) => {\n      if (admin_name && !provincesByName[admin_name]) {\n        provincesByName[admin_name] = nextProvinceId;\n\n        provinces.push({\n          id: nextProvinceId,\n          name: admin_name,\n        });\n\n        nextProvinceId += 1;\n      }\n\n      cities.push({\n        id: i + 1,\n        name: city,\n        provinceId: admin_name ? provincesByName[admin_name] || null : null,\n        population: population ? Number(population) : null,\n        latLng: [Number(lat), Number(lng)],\n        distance: -1,\n      });\n    },\n  );\n\n  provinces.sort((a, b) => collator.compare(a.name, b.name));\n\n  return { cities, provinces };\n};\n\nexport const fetchCities = fetch(`${process.env.PUBLIC_URL}/data.json`)\n  .then((response) => {\n    if (!response.ok) throw new Error(response.statusText);\n\n    return response.json() as Promise<DenormalizedCity[]>;\n  })\n  .then(normalizeCities);\n","import { City, fetchCities, Province } from 'models';\nimport { FC, useEffect, useState } from 'react';\nimport { CitiesPage } from './CitiesPage';\nimport { ErrorPage } from './ErrorPage';\n\nexport const IndexPage: FC = () => {\n  const [cities, setCities] = useState<City[] | null>(null);\n  const [provinces, setProvinces] = useState<Province[] | null>(null);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    fetchCities\n      .then(({ cities, provinces }) => {\n        setCities(cities);\n        setProvinces(provinces);\n      })\n      .catch(setError);\n  }, []);\n\n  if (error) return <ErrorPage error={error} />;\n\n  if (cities && provinces)\n    return <CitiesPage cities={cities} provinces={provinces} />;\n\n  return null;\n};\n","import { StylesProvider } from '@material-ui/core';\nimport { IndexPage } from 'pages';\nimport { FC } from 'react';\n\nexport const App: FC = () => (\n  <StylesProvider injectFirst>\n    <IndexPage />\n  </StylesProvider>\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}